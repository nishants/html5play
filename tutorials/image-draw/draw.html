<!DOCTYPE html>
<head>
    <link 	rel="stylesheet" href="../../stylesheets/foundation.css">
	<link 	rel="stylesheet" href="style.css">

	<script src="../../javascripts/lib/jquery-2.1.3.min.js"></script>
	<script type="text/javascript" src="mask.js"></script>
	<script type="text/javascript" src="draw.js"></script>
</head>

<body>
	<section id="image-draw-app">
		<img id="some-image" src="images/background.jpg">
	</section>	

	<script type="text/javascript">
		var assertThat = function(canvasVal, imageVal, propertyName){
		    if(!(canvasVal === imageVal)){
		        console.error(propertyName + ": canvas: "+canvasVal + ", image: "+imageVal);
		    } else {
		        console.log(propertyName + " = " + canvasVal);
		    }
		};

		window.test = function(){
		    var canvas = $("#mask");
		    var image  = $("#some-image");
		    assertThat(canvas.height(), image.height(), "height");
		    assertThat(canvas.width(), image.width(), "width");
		    
		    assertThat(canvas.position().left, image.position().left, "left");
		    assertThat(canvas.position().right, image.position().right, "right");
		};

		
		$(document).ready(function(){
			window.drawing = org.geeksaints.chiesel.editImage($("#some-image"));
		    setTimeout(function(){drawing.drawLine({x: 0, y: 0}, {x:300 ,y: 150});});
		    setTimeout(function(){drawing.drawLine({x: 300 ,y:0 }, {x: 0, y: 150});});
		    setTimeout(function(){drawing.markPoint(400, 400);});
		    setTimeout(function(){drawing.markPoint(450, 450);});
		    setTimeout(function(){drawing.markPoint(500, 500);});
		    setTimeout(function(){drawing.markPoint(550, 550);});
		});
	</script>
</body>
</html>